# Codebase Structure

**Analysis Date:** 2025-01-11

## Directory Layout

```
MoreCheckmarks/
├── .planning/              # Project planning documents
│   └── codebase/          # Codebase analysis documents
├── Client/                 # Client-side BepInEx plugin
│   ├── Assets/            # Unity asset bundles
│   ├── Properties/        # Assembly metadata
│   ├── bin/               # Build output (gitignored)
│   ├── obj/               # Build intermediates (gitignored)
│   └── MoreCheckmarks.cs  # Main plugin source
├── Server/                 # Server-side SPT mod
│   ├── Properties/        # Assembly metadata
│   ├── bin/               # Build output (gitignored)
│   ├── obj/               # Build intermediates (gitignored)
│   ├── MoreCheckmarksBackend.cs   # Server entry point
│   └── MoreCheckmarksRouter.cs    # HTTP route handlers
├── dist/                   # Distribution output
│   ├── BepInEx/           # Client plugin output
│   └── SPT/               # Server mod output
├── MoreCheckmarks.sln      # Visual Studio solution
└── README.md              # User documentation
```

## Directory Purposes

**Client/**
- Purpose: Client-side BepInEx plugin for game UI modification
- Contains: Main C# source file, Unity assets, project configuration
- Key files:
  - `MoreCheckmarks.cs` - All plugin logic (~2300 lines)
  - `MoreCheckmarks.csproj` - Project file with SPT path configuration
  - `Assets/MoreCheckmarksAssets` - Unity asset bundle with checkmark sprite
- Subdirectories: Properties (AssemblyInfo), bin/obj (build artifacts)

**Server/**
- Purpose: Server-side SPT mod providing data endpoints
- Contains: C# source files for HTTP routing and data handlers
- Key files:
  - `MoreCheckmarksBackend.cs` - Main server class, data handlers, mod metadata
  - `MoreCheckmarksRouter.cs` - HTTP route registration
  - `MoreCheckmarksBackend.csproj` - Project file with NuGet references
- Subdirectories: Properties, bin/obj (build artifacts)

**dist/**
- Purpose: Build output for distribution
- Contains: Compiled DLLs in SPT-compatible folder structure
- Key files:
  - `BepInEx/plugins/MoreCheckmarks/MoreCheckmarks.dll` - Client plugin
  - `SPT/user/mods/MoreCheckmarksBackend/MoreCheckmarksBackend.dll` - Server mod
  - `MoreCheckmarks-v2.0.1.7z` - Distribution archive

**.planning/codebase/**
- Purpose: Codebase documentation for Claude/planning
- Contains: Analysis documents (STACK, ARCHITECTURE, etc.)

## Key File Locations

**Entry Points:**
- `Client/MoreCheckmarks.cs` - Plugin entry point (`MoreCheckmarksMod.Start()`)
- `Server/MoreCheckmarksBackend.cs` - Server entry point (`OnLoad()`)

**Configuration:**
- `Client/MoreCheckmarks.csproj` - Client build config, SPT path
- `Server/MoreCheckmarksBackend.csproj` - Server build config, NuGet packages
- `MoreCheckmarks.sln` - Visual Studio solution

**Core Logic:**
- `Client/MoreCheckmarks.cs` - All client logic: patches, UI, data caching
- `Server/MoreCheckmarksBackend.cs` - Data handlers for quests, items, assorts
- `Server/MoreCheckmarksRouter.cs` - HTTP route definitions

**Assets:**
- `Client/Assets/MoreCheckmarksAssets` - Unity asset bundle
- `Client/Assets/WhiteCheckmark.png` - Source checkmark sprite

**Documentation:**
- `README.md` - User-facing installation and usage guide
- `.planning/codebase/*.md` - Developer documentation

## Naming Conventions

**Files:**
- PascalCase.cs for C# source files
- PascalCase.csproj for project files
- UPPERCASE.md for important project files (README)

**Directories:**
- PascalCase for main directories (Client, Server)
- lowercase for standard directories (bin, obj, dist)

**Special Patterns:**
- Single .cs file per project (monolithic approach)
- No index files or barrel exports (C# namespaces handle this)

## Where to Add New Code

**New Client Feature:**
- Primary code: `Client/MoreCheckmarks.cs` (add to existing file)
- New Harmony patch: Add nested class in `Client/MoreCheckmarks.cs`
- New config option: Add ConfigEntry in `BindConfig()` method

**New Server Endpoint:**
- Route handler: `Server/MoreCheckmarksRouter.cs` (add RouteAction)
- Data handler: `Server/MoreCheckmarksBackend.cs` (add Handle* method)

**New Asset:**
- Source file: `Client/Assets/`
- Must be bundled into `MoreCheckmarksAssets` Unity asset bundle

**New Project:**
- Add to `MoreCheckmarks.sln`
- Follow existing project structure

## Special Directories

**dist/**
- Purpose: Build output matching SPT installation structure
- Source: Generated by MSBuild via OutputPath in .csproj
- Committed: Yes (contains release archive)

**bin/, obj/**
- Purpose: Build artifacts and intermediates
- Source: Generated by MSBuild
- Committed: No (in .gitignore)

**Client/hub/**
- Purpose: Unknown/unused (possibly legacy)
- Source: Original project template
- Committed: Yes but appears unused

---

*Structure analysis: 2025-01-11*
*Update when directory structure changes*
