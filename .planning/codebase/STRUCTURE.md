# Codebase Structure

**Analysis Date:** 2026-01-11

## Directory Layout

```
MoreCheckmarks/
├── .planning/          # Project planning documentation
│   └── codebase/      # Codebase analysis documents
├── Client/            # BepInEx client plugin
│   ├── Assets/        # Unity assets (sprites, bundles)
│   ├── Properties/    # Assembly metadata
│   ├── bin/           # Build output (gitignored)
│   ├── obj/           # Intermediate build files (gitignored)
│   └── MoreCheckmarks.cs    # Main plugin source
├── Server/            # SPT server mod
│   ├── Properties/    # Assembly metadata
│   ├── bin/           # Build output (gitignored)
│   ├── obj/           # Intermediate build files (gitignored)
│   ├── MoreCheckmarksBackend.cs   # Server mod main class
│   └── MoreCheckmarksRouter.cs    # HTTP route definitions
├── dist/              # Build distribution output
│   ├── BepInEx/       # Client files for distribution
│   └── SPT/           # Server files for distribution
├── MoreCheckmarks.sln # Visual Studio solution
├── README.md          # User documentation
└── CLAUDE.md          # Claude Code instructions
```

## Directory Purposes

**Client/**
- Purpose: BepInEx plugin that modifies game UI
- Contains: Single C# source file, assets, project config
- Key files: `MoreCheckmarks.cs` (all plugin logic, ~118KB)
- Subdirectories: `Assets/` (sprites), `Properties/` (AssemblyInfo)

**Client/Assets/**
- Purpose: Unity assets loaded at runtime
- Contains: `MoreCheckmarksAssets` (AssetBundle), `WhiteCheckmark.png/psd`
- Key files: `MoreCheckmarksAssets` - Unity AssetBundle with white checkmark sprite

**Server/**
- Purpose: SPT server mod providing data API endpoints
- Contains: Two C# source files, project config
- Key files: `MoreCheckmarksBackend.cs` (data handlers), `MoreCheckmarksRouter.cs` (routes)
- Subdirectories: `Properties/` (AssemblyInfo)

**dist/**
- Purpose: Build output matching SPT installation structure
- Contains: Compiled DLLs and assets ready for distribution
- Key files:
  - `BepInEx/plugins/MoreCheckmarks/MoreCheckmarks.dll`
  - `SPT/user/mods/MoreCheckmarksBackend/MoreCheckmarksBackend.dll`
- Subdirectories: Mirrors SPT folder structure

**.planning/**
- Purpose: Project planning and documentation
- Contains: Codebase analysis, project context
- Key files: `codebase/STACK.md`, `codebase/ARCHITECTURE.md`, etc.

## Key File Locations

**Entry Points:**
- `Client/MoreCheckmarks.cs` - BepInEx plugin entry (Start() method)
- `Server/MoreCheckmarksBackend.cs` - Server mod entry (OnLoad() method)

**Configuration:**
- `Client/MoreCheckmarks.csproj` - Client build config, SPT path, references
- `Server/MoreCheckmarksBackend.csproj` - Server build config, NuGet packages
- `MoreCheckmarks.sln` - Visual Studio solution

**Core Logic:**
- `Client/MoreCheckmarks.cs` - All client logic (config, data loading, UI patches)
- `Server/MoreCheckmarksBackend.cs` - Data handlers (quests, assorts, items)
- `Server/MoreCheckmarksRouter.cs` - HTTP route definitions

**Testing:**
- None (no test files present)

**Documentation:**
- `README.md` - User installation and configuration guide
- `CLAUDE.md` - Development instructions for Claude Code

## Naming Conventions

**Files:**
- PascalCase.cs for C# source files
- PascalCase for Visual Studio projects (.csproj, .sln)
- UPPERCASE.md for important documentation files

**Directories:**
- PascalCase for main directories (Client, Server)
- lowercase for build/output directories (dist, bin, obj)
- .lowercase for hidden directories (.planning, .git)

**Special Patterns:**
- Single file per component (all client logic in one file)
- Matching names between DLL and directory (MoreCheckmarks.dll in MoreCheckmarks/)

## Where to Add New Code

**New Client Feature:**
- Primary code: Add to `Client/MoreCheckmarks.cs`
- Assets: Add to `Client/Assets/`
- Config: Add ConfigEntry in BindConfig() method

**New Server Endpoint:**
- Route: Add RouteAction in `Server/MoreCheckmarksRouter.cs`
- Handler: Add method in `Server/MoreCheckmarksBackend.cs`

**New Data Type:**
- Client struct/class: Add to `Client/MoreCheckmarks.cs`
- Server data access: Add handler method in `MoreCheckmarksServer`

**Documentation:**
- User docs: Update `README.md`
- Planning docs: Add to `.planning/`

## Special Directories

**dist/**
- Purpose: Build output for distribution
- Source: Generated by MSBuild via .csproj OutputPath
- Committed: Partially (gitignore may exclude some files)

**bin/, obj/**
- Purpose: Build artifacts and intermediate files
- Source: MSBuild compilation
- Committed: No (in .gitignore)

**.planning/**
- Purpose: Development planning and codebase documentation
- Source: Created manually for project context
- Committed: Yes

---

*Structure analysis: 2026-01-11*
*Update when directory structure changes*
